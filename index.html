<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FanWorld Feed & Post</title>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Barlow:wght@400;700&display=swap" rel="stylesheet">
<style>
*, *:before, *:after { box-sizing: border-box; }
html, body { max-width: 100%; overflow-x: hidden; -webkit-text-size-adjust: 100%; }
body, header, input, .container, .main-feed-flex, .posts-column, .welcome-box, .welcome-box h2, .welcome-box p, .post-title, .post-text, .post-actions, .back-btn, .credit, .similar-posts-section, .similar-posts-title, .similar-post-card { font-family: 'Barlow', Arial, sans-serif !important; }
body { background: #fff; margin: 0; color: #222; }
header { display: flex; justify-content: space-between; align-items: center; padding: 18px 24px; background: #e0d7c3; color: #222; box-shadow: 0 2px 10px #0001; }
#siteTitle { font-weight: 700; font-size: 1.6rem; letter-spacing: 0.04em; }
input, textarea, select, button { font-size: 16px; }
#searchBar { padding: 8px 14px; font-size: 1rem; border-radius: 7px; border: 1px solid #bbb; width: 220px; transition: border-color 0.2s; outline: none; background: #fff;}
#searchBar:focus { border-color: #b69967; }
.container { padding: 28px 14px; max-width: 940px; margin: 28px auto 0 auto; background: #fff; border-radius: 14px; min-height: 330px; }
.main-feed-flex { display: flex; flex-direction: row; align-items: flex-start; gap: 20px; position: relative; min-height: 330px; background: #fff; }
.posts-column { flex:1; }
.welcome-box { flex-basis: 300px; flex-shrink:0; }
/* Policy modal */
#policyModal { position: fixed; inset: 0; background: rgba(0,0,0,0.45); z-index: 9999; display: flex; align-items: center; justify-content: center; }
#policyModal .modal-inner { background: #fff; padding: 20px; border-radius: 12px; max-width: 92vw; width: 420px; box-shadow: 0 8px 32px rgba(0,0,0,0.18); font-family: 'Barlow', sans-serif; }
#policyModal h2 { margin-top: 0; font-size: 1.05rem; }
#policyModal p { margin-bottom: 12px; font-size: 0.98rem; }
#policyModal label { display: flex; align-items: center; gap: 8px; font-size: 0.98rem; }
#policyModal button { padding: 9px 16px; border-radius: 8px; background: #b69967; color: #fff; border: none; font-weight: 700; cursor: pointer; }

/* Post tile and card CSS for Pinterest-style layout */
.post-tile, .similar-post-card {
  position: relative;
  cursor: pointer;
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 16px;
  display: inline-block;
  width: 100%;
}
/* Force all images (Post A & B) to same height */
.tile-img, .similar-thumb {
  width: 100%;
  object-fit: cover;
  border-radius: 12px;
}
.post-tile.postA .tile-img, .similar-post-card.postA .similar-thumb {
  height: 110px; /* same size as small posts */
}
.post-tile.postB, .similar-post-card.postB { /* Post B rectangle style */
  background: #d2b48c; /* dark beige */
  color: #fff;
  height: 110px; /* half height of Post A */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 8px;
}
.post-tile.postB .tile-overlay, .similar-post-card.postB .tile-overlay { 
  position: static; 
  background: none; 
  color: #fff; 
  padding: 0; 
  line-height: 1.2;
}
.post-tile.postB .credit, .similar-post-card.postB .credit { font-size: 0.75rem; margin-top: 4px; }

.tile-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  background: rgba(0,0,0,0.55);
  color: #fff;
  padding: 8px 10px;
  line-height: 1.2;
}
.tile-overlay span:first-child { font-weight: 700; font-size: 1rem; display: block; }
.tile-overlay span:last-child { font-weight: 400; font-size: 0.85rem; display: block; }

.post-card { border-radius: 12px; overflow: hidden; background: #fefefe; padding: 12px; box-shadow: 0 2px 10px #0001; }
.back-btn { background: #b69967; color: #fff; border: none; border-radius: 8px; padding: 8px 12px; cursor: pointer; margin-bottom: 12px; }

/* Masonry layout */
#postsList, .similar-posts-list { column-count: 3; column-gap: 16px; }
@media(max-width: 1020px){ #postsList, .similar-posts-list { column-count: 2; } }
@media(max-width: 600px){ #postsList, .similar-posts-list { column-count: 1; } }

#sidebarSpecialPosts { margin-top:16px; }
</style>
</head>
<body>

<!-- FanWorld Policy Modal -->
<div id="policyModal" aria-hidden="false">
  <div class="modal-inner">
    <h2>FanWorld Policy</h2>
    <p>I agree to the FanWorld Policy: All content is properly credited, shared only for sweet entertainment and enjoyment, not intended to harm anyone or any platform. I understand I can only access FanWorld after agreeing. Sweet enjoyment is the goal!</p>
    <p>All images used in collages or posts belong to their respective creators. They are used here for inspiration purposes only, with no intent to infringe copyright. If you wish to reach out, contact: fanclubforyouishere@gmail.com</p>
    <div style="margin-bottom:12px;">
      <label><input type="checkbox" id="agreeBox"> I agree to the FanWorld Policy.</label>
    </div>
    <div style="text-align:right;"><button id="agreeBtn" disabled>Enter FanWorld</button></div>
  </div>
</div>

<header>
  <div id="siteTitle">FanWorld</div>
  <input id="searchBar" placeholder="Search..." />
</header>

<div class="container main-feed-flex" id="mainFeed">
  <div class="posts-column">
    <div id="postsList"></div>
  </div>
  <div class="welcome-box">
    <h2>Welcome to FanWorld!</h2>
    <p>Browse the latest posts. Click a post to see details!</p>
    <p>Our purpose is to provide with cute content and support social media users/creators. Posts may be added/removed from the dashboard.</p>
    <!-- Special posts sidebar container -->
    <div id="sidebarSpecialPosts"></div>
  </div>
</div>

<div class="container" style="display:none;" id="singlePostView"></div>

<script>
const policyModal=document.getElementById('policyModal');
const agreeBox=document.getElementById('agreeBox');
const agreeBtn=document.getElementById('agreeBtn');
function openPolicy(){ policyModal.style.display='flex'; policyModal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; }
function closePolicy(){ policyModal.style.display='none'; policyModal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }
agreeBox.addEventListener('change',()=>{agreeBtn.disabled=!agreeBox.checked;});
agreeBtn.addEventListener('click',()=>{closePolicy();});
window.addEventListener('DOMContentLoaded',()=>{openPolicy();});

// All posts array (no special post here anymore)
const posts=[
  {id:11,type:'A',image:'https://i.imgur.com/8HPjZxI.jpeg',title:"A peak of Tanya's 800 saris",celebrity:'Tanya Mittal',text:'',credit:'Instagram / tanyamittalofficial'},
  {id:10,type:'B',image:'',title:'Every girl wants a blush moment like this',celebrity:'Tanya Mittal & Amaal Malik',text:'',externalLink:'https://www.instagram.com/p/DO2_qRoiPLg/',credit:'Instagram / realityshow_editz3000'},
  {id:8,type:'B',image:'',title:'BB19 Die for moment',celebrity:'Armaan & Amaal Malik',text:'',externalLink:'https://www.instagram.com/p/DRXlVhKE2Ww/',credit:'Instagram / proudly_armaalian'},
  {id:20,type:'A',image:'https://i.imgur.com/rSxe36w.jpeg',title:"Tanya's dimples have their own fanbase",celebrity:'Tanya Mittal',text:'Her dimples truly have their own sweet fanbase!',credit:'Credit for parts joined to create design: Instagram / Shagun Vashishth & Tanya Mittal'},
  {id:7,type:'B',image:'',title:'The new couple in town out of BB19',celebrity:'Natalia Janoszek & Mridul Tiwari',text:'',externalLink:'https://www.instagram.com/p/DRfHd9FjXwe/',credit:'Instagram / mj.vishal'}
];

// Special sidebar posts array
const specialPosts=[
  {id:100,type:'A',image:'https://i.imgur.com/EbUW3gU.jpeg',title:'We want to see this again',celebrity:'Tanya Mittal & Amaal Malik',text:'',credit:'Instagram / biggbosssss_19',externalLink:'https://www.instagram.com/p/DRWrB3rDHsZ/'}
];

let currentPost=null,lastViewedPostId=null;

function renderGrid(postsArr){
  const postsList=document.getElementById('postsList');
  postsList.innerHTML=postsArr.map(post=>{
    if(post.type==='A'){
      return `<div class="post-tile postA" onclick="showPost(${post.id})">
        <img class="tile-img" src="${escapeHtml(post.image)}" alt="${escapeHtml(post.title)}">
        <div class="tile-overlay">
          <span>${escapeHtml(post.title)}</span>
          <span>${escapeHtml(post.celebrity)}</span>
        </div>
      </div>`;
    } else { 
      return `<div class="post-tile postB" onclick="showPost(${post.id})">
        <div class="tile-overlay">
          <span>${escapeHtml(post.title)}</span>
          <span>${escapeHtml(post.celebrity)}</span>
          <div class="credit">${escapeHtml(post.credit)}</div>
        </div>
      </div>`;
    }
  }).join('');
  
  // Render special posts in sidebar only (small size)
  const sidebar=document.getElementById('sidebarSpecialPosts');
  sidebar.innerHTML=specialPosts.map(post=>{
    return `<div class="post-tile postA" onclick="showPost(${post.id})">
      <img class="tile-img" src="${escapeHtml(post.image)}" alt="${escapeHtml(post.title)}">
      <div class="tile-overlay">
        <span>${escapeHtml(post.title)}</span>
        <span>${escapeHtml(post.celebrity)}</span>
      </div>
    </div>`;
  }).join('');
}

function showPost(id){
  const post=posts.concat(specialPosts).find(p=>p.id===id);
  if(!post) return;
  currentPost=post;
  lastViewedPostId=id;
  document.getElementById('mainFeed').style.display='none';
  
  let creditSection='';
  if(post.type==='A'){
    creditSection=`<div class="credit">${escapeHtml(post.credit)}</div>`;
  } else if(post.type==='B'){
    creditSection=`<div class="credit">${escapeHtml(post.credit)}</div>
    <div><a href="${escapeHtml(post.externalLink)}" target="_blank" rel="noopener">Check this out</a></div>`;
  }
  
  let postContent='';
  if(post.type==='A'){
    postContent=`<img class="tile-img single" src="${escapeHtml(post.image)}" style="width:100%; height:auto; border-radius:12px;" alt="${escapeHtml(post.title)}">`;
    if(post.externalLink){
      postContent+=`<div style="margin-top:8px;"><a href="${escapeHtml(post.externalLink)}" target="_blank" rel="noopener">Check this out</a></div>`;
    }
  } else {
    postContent=`<div class="postB" style="height:220px; display:flex; flex-direction:column; justify-content:center; align-items:center;">
      <span>${escapeHtml(post.title)}</span>
      <span>${escapeHtml(post.celebrity)}</span>
      ${creditSection}
    </div>`;
  }
  
  document.getElementById('singlePostView').innerHTML=`
    <button class="back-btn" onclick="goBack()">‚Üê Back</button>
    <div class="post-card">
      ${postContent}
      <div class="post-text">${escapeHtml(post.text||'')}</div>
      ${creditSection}
    </div>
    <div class="similar-posts-section">
      <div class="similar-posts-title">Similar posts:</div>
      <div class="similar-posts-list">${renderSimilarPosts(post.id)}</div>
    </div>
  `;
  document.getElementById('singlePostView').style.display='block';
}

function goBack(){ document.getElementById('mainFeed').style.display='flex'; document.getElementById('singlePostView').style.display='none'; }

function renderSimilarPosts(currentId){
  const allPosts=posts.concat(specialPosts);
  return allPosts.filter(p=>p.id!==currentId).map(p=>{
    if(p.type==='A'){
      return `<div class="similar-post-card postA" onclick="showPost(${p.id})">
        <img class="similar-thumb" src="${escapeHtml(p.image)}" alt="${escapeHtml(p.title)}">
        <div class="tile-overlay">
          <span>${escapeHtml(p.title)}</span>
          <span>${escapeHtml(p.celebrity)}</span>
        </div>
      </div>`;
    } else {
      return `<div class="similar-post-card postB" onclick="showPost(${p.id})">
        <div class="tile-overlay">
          <span>${escapeHtml(p.title)}</span>
          <span>${escapeHtml(p.celebrity)}</span>
          <div class="credit">${escapeHtml(p.credit)}</div>
        </div>
      </div>`;
    }
  }).join('');
}

function escapeHtml(str){ if(!str && str!==0) return ''; return String(str).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;').replaceAll("'",'&#39;'); }

// Search functionality
const searchInput=document.getElementById('searchBar');
let searchTimer=null;
if(searchInput){ searchInput.addEventListener('keyup',()=>{
  clearTimeout(searchTimer);
  searchTimer=setTimeout(()=>{
    const query=searchInput.value.toLowerCase();
    const allPosts=posts.concat(specialPosts);
    const filtered=allPosts.filter(p=>p.title.toLowerCase().includes(query)||p.celebrity.toLowerCase().includes(query));
    if(document.getElementById('mainFeed').style.display!=='none'){ renderGrid(filtered); }
    if(document.getElementById('singlePostView').style.display!=='none'){
      const similarList=document.querySelector('.similar-posts-list');
      if(similarList){ similarList.innerHTML=filtered.filter(p=>p.id!==lastViewedPostId).map(p=>{
        if(p.type==='A'){
          return `<div class="similar-post-card postA" onclick="showPost(${p.id})">
            <img class="similar-thumb" src="${escapeHtml(p.image)}" alt="${escapeHtml(p.title)}">
            <div class="tile-overlay">
              <span>${escapeHtml(p.title)}</span>
              <span>${escapeHtml(p.celebrity)}</span>
            </div>
          </div>`;
        } else {
          return `<div class="similar-post-card postB" onclick="showPost(${p.id})">
            <div class="tile-overlay">
              <span>${escapeHtml(p.title)}</span>
              <span>${escapeHtml(p.celebrity)}</span>
              <div class="credit">${escapeHtml(p.credit)}</div>
            </div>
          </div>`;
        }
      }).join(''); }
    }
  },300);
}); }

document.addEventListener('DOMContentLoaded',()=>{ renderGrid(posts); });
</script>
</body>
</html>
